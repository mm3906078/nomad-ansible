# Consul Server Configuration
# Auto-generated by Ansible

datacenter = "{{ datacenter }}"
data_dir = "{{ consul_data_dir }}"
log_level = "{{ consul_log_level }}"

server = true
bootstrap_expect = {{ consul_bootstrap_expect }}

bind_addr = "{{ ansible_host }}"
client_addr = "0.0.0.0"

ui_config {
  enabled = {{ consul_ui_enabled | lower }}
}

# Retry join configuration for multi-master setup
retry_join = {{ consul_retry_join | to_json }}

ports {
  http = 8500
  https = -1
  grpc = 8502
  grpc_tls = -1
}

# Performance tuning
performance {
  raft_multiplier = 1
}

# Connect service mesh
connect {
  enabled = true
}
