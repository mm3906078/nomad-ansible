# Fabio Load Balancer Configuration
# Auto-generated by Ansible

# Consul Registry Backend
{% if enable_tls | bool %}
registry.consul.addr = 127.0.0.1:8501
registry.consul.scheme = https
registry.consul.tls.cafile = {{ tls_dir }}/ca.pem
registry.consul.tls.certfile = {{ tls_dir }}/consul.pem
registry.consul.tls.keyfile = {{ tls_dir }}/consul.key
registry.consul.tls.insecureskipverify = false
{% else %}
registry.consul.addr = 127.0.0.1:8500
registry.consul.scheme = http
{% endif %}

# Proxy settings
proxy.addr = :{{ fabio_lb_port }}
proxy.strategy = rnd
proxy.matcher = prefix
proxy.noroutestatus = 404
proxy.shutdownwait = 5s
proxy.responseheadertimeout = 30s
proxy.keepalivetimeout = 2m
proxy.dialtimeout = 30s

# UI settings
ui.addr = :{{ fabio_ui_port }}
ui.title = Fabio Load Balancer

# Logging
log.level = {{ fabio_log_level }}
log.access.target = stdout
log.access.format = common

# Metrics
metrics.target = {{ fabio_metrics_target }}
metrics.prefix = {{ fabio_metrics_prefix }}
metrics.interval = 30s

# Runtime options
runtime.gogc = 800
runtime.gomaxprocs = -1
